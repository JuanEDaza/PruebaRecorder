<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<title>Audio Recording</title>
	<link rel="icon" href="https://cdn-hjhjb.nitrocdn.com/cZXOmaOnBzchEVsoklMbKZDzVVPPjcww/assets/images/optimized/rev-5cfca33/www.informationsys.com/wp-content/uploads/2021/11/cropped-cropped-Icon_information-192x192.png" type="image/x-icon">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
	<div class="title-container">
		<img src="https://i0.wp.com/www.districosmeticos.com/wp-content/uploads/2022/05/Sistecredito.png?w=370&ssl=1"
			alt="Sistecredito" width="200">
		<img
			src="https://cdn-hjhjb.nitrocdn.com/cZXOmaOnBzchEVsoklMbKZDzVVPPjcww/assets/images/optimized/rev-5cfca33/www.informationsys.com/wp-content/uploads/2021/11/cropped-cropped-Icon_information-192x192.png"
			alt="Infosys" width="60">
	</div>

	<select id="encodingTypeSelect" disabled hidden>
		<!-- <option value="wav">Waveform Audio (.wav)</option> -->
		<option value="mp3" selected>MP3 (MPEG-1 Audio Layer III) (.mp3)</option>
		<!-- <option value="ogg">Ogg Vorbis (.ogg)</option> -->
	</select>

	<div id="container-timer">
		<p id="timer">00:00</p>
		<canvas id="waveCanvas" style="display: none;"></canvas>
	</div>

	<div class="controls">

		<button id="recordButton" class="button"><i class="fa-solid fa-microphone"></i> Grabar</button>
		<button id="stopButton" class="button" disabled><i class="fa-solid fa-stop"></i> Detener</button>
	</div>

	<div id="recordingsList"></div>

	<div class="controls">
		<button id="sendButton" class="button" style="display: block" disabled><i class="fa-solid fa-paper-plane"></i> Enviar</button>
	</div>
	
	<script src="js/WebAudioRecorder.min.js"></script>
	<script src="js/app.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>
	<script type="text/javascript">
		// Obtain a reference to the platformClient object
		const platformClient = require("platformClient");
		const api = platformClient.ApiClient.instance;
		api.setEnvironment(platformClient.PureCloudRegionHosts.sa_east_1);

		const searchParameters = new URLSearchParams(
			location.search.slice(1) || location.hash.slice(1)
		);
		const conversationId = searchParameters.get("gcConversationId");
		const token = searchParameters.get("access_token");

		if (conversationId) {
			localStorage.setItem('conversationIdCache', conversationId);
			console.log('Inicial ' + conversationId);
			alert('Inicial ' + conversationId);
		} else {
			var conversationCache = localStorage.getItem('conversationIdCache');
			console.log('Token: ' + token);
			console.log('Recuperado ' + conversationCache);
			alert('Recuperado: ' + conversationCache + '\n\nToken: ' + token);
		}

		api.loginImplicitGrant(
			"eff0ef76-cf9f-4556-8600-a175afe307f2",
			"https://juanedaza.github.io/PruebaRecorder/"
		)
	</script>

</body>

</html>